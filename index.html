<html>
<head>
<body>
	<canvas height="400", width="500" style="background: Black;"></canvas>
</body>
<script>
	/*var gameOver = false;*/

	/*event listeners*/
	addEventListener("keydown", function(event){
		if(event.keyCode == 37){
			left = true;
		}
		if(event.keyCode == 39){
			right = true;
		}
		// console.log(event.keyCode);
	});

	addEventListener("keyup", function(event){
		if(event.keyCode == 37){
			left = false;
		}
		if(event.keyCode == 39){
			right = false;
		}
	});

	addEventListener("keydown", function(event){
		if(event.keyCode == 13){
			restart();
		}
		// console.log(event.keyCode);
	});

	var canvas = document.querySelector("canvas");
	var cx = canvas.getContext("2d");

	/*ball class*/
	function Ball(x, y){
		this.x = x;
		this.y = y;
	}

	Ball.prototype.reInitialize = function(){
		this.x = canvas.width/2;
		this.y = 3*canvas.height/4;
		this.setSpeed(2, 2);
	}

	Ball.prototype.setRadius = function(radius){
		this.radius = radius;
	}
	Ball.prototype.setSpeed = function(speed_x, speed_y){
		this.speed = {x: speed_x, y: speed_y};
	}
	Ball.prototype.setColor = function(color){
		this.color = color;
	} 

	ball = new Ball(canvas.width/2, 3*canvas.height/4);
	ball.setRadius(10);
	ball.setSpeed(2, 2);
	ball.setColor("yellow");

	function drawBall(){
		cx.beginPath();
		// cx.arc(cx.)
		cx.arc(ball.x, ball.y, ball.radius, 0, 10);
		cx.fillStyle = ball.color;
		cx.fill();
		cx.closePath();
	}
	// drawBall();

	function moveBall(){
		if(ball.x >= (canvas.width-ball.radius)){
			// right wall
			ball.speed.x *= -1;
		}
		if(ball.x <= ball.radius){
			// left wall
			ball.speed.x *= -1;
		}
		if(ball.y <= ball.radius){
			// lower wall
			ball.speed.y *= -1;
		}
		if(ball.y >= (canvas.height-ball.radius-sprite.height)){
			// right wall
			if((ball.x >= (sprite.x - sprite.width/2)) && (ball.x <= (sprite.x + sprite.width/2)))
				ball.speed.y *= -1;
			else{
				restart();
				// ball.speed = {x:0, y:0};
			}
				
		}
		ball.x += ball.speed.x;
		ball.y -= ball.speed.y;
	}

	/*sprite class*/

	function Sprite(width, height){
		// 
		this.height = height;
		this.width = width;
	}

	Sprite.prototype.reInitialize = function(){
		this.x = canvas.width/2;
		this.y = canvas.height-this.height/2;
	}

	Sprite.prototype.setSpeed = function(speed_x, speed_y){
		this.speed = {x: speed_x, y: speed_y};
	}

	Sprite.prototype.setColor = function(color){
		this.color = color;
	}

	sprite = new Sprite(75, 15);
	sprite.reInitialize();
	sprite.setSpeed(5, 2);
	function drawSprite(){
		cx.beginPath();
		cx.rect(sprite.x - sprite.width/2, sprite.y - sprite.height/2, sprite.width, sprite.height);
		cx.fill();
		cx.closePath();
	}
	// drawSprite();

	var right = false;
	var left = false; 

	function moveSprite(){
		if(right && (sprite.x + sprite.width/2) < canvas.width){
			sprite.x += sprite.speed.x;
		}
		if(left && (sprite.x > sprite.width/2)){
			sprite.x -= sprite.speed.x;
			// return;
		}
	}

	function play(){
		cx.clearRect(0, 0, canvas.width, canvas.height);

		// draw
		drawBall();
		drawSprite();

		// move
		moveBall();
		moveSprite();
	}

	var timer;

	function autoPlay(){
		timer = setInterval(play, 5);
	}

	function restart(){
		clearInterval(timer);
		ball.reInitialize();
		sprite.reInitialize();
		// autoPlay();
	}
	autoPlay();
 
	/*var verticalDist = 10;
	var horizontalDist = 10;*/

	function initializeBars(horizontalNum, verticalNum, horizontalDist, verticalDist){
		var allBars = Array();

		// verticalDist -> vertical dist between bars
		
		var width = (canvas.width - (horizontalNum+1)*horizontalDist) / horizontalNum;
		var height = (canvas.height/4 - (verticalNum+1)*verticalNum) / verticalNum;

		var currX = verticalDist;
		var currY = horizontalDist;
		/*for(var i=0; i<horizontalNum; i+=1){
			for(var j=0; j<verticalNum; j+=1){

			}
		}*/

	}

	initializeBars(5, 5, 10, 10);


</script>
</head>
</html>